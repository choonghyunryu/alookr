<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Splitting the dataset • alookr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Splitting the dataset">
<meta property="og:description" content="alookr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">alookr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cleansing.html">Cleansing the dataset</a>
    </li>
    <li>
      <a href="../articles/modeling.html">Classification Modeling</a>
    </li>
    <li>
      <a href="../articles/split.html">Splitting the dataset</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/choonghyunryu/alookr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="split_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Splitting the dataset</h1>
                        <h4 class="author">Choonghyun Ryu</h4>
            
            <h4 class="date">2020-08-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/choonghyunryu/alookr/blob/master/vignettes/split.Rmd"><code>vignettes/split.Rmd</code></a></small>
      <div class="hidden name"><code>split.Rmd</code></div>

    </div>

    
    
<div id="preface" class="section level2">
<h2 class="hasAnchor">
<a href="#preface" class="anchor"></a>Preface</h2>
<p>To develop a classification model, the original data must be divided into train data set and test data set. You should do the following:</p>
<ul>
<li>Cleansing the dataset</li>
<li>
<strong>Split the data into a train set and a test set</strong>
<ul>
<li><strong>Split the data.frame or tbl_df into a train set and a test set</strong></li>
<li>
<strong>Compare dataset</strong>
<ul>
<li><strong>Comparison of categorical variables</strong></li>
<li><strong>Comparison of numeric variables</strong></li>
<li><strong>Diagnosis of train set and test set</strong></li>
</ul>
</li>
<li>
<strong>Extract train/test dataset</strong>
<ul>
<li><strong>Extract train set or test set</strong></li>
<li><strong>Extract the data to fit the model</strong></li>
</ul>
</li>
</ul>
</li>
<li>Modeling and Evaluate, Predict</li>
</ul>
<p>The alookr package makes these steps fast and easy:</p>
</div>
<div id="data-credit-card-default-data" class="section level2">
<h2 class="hasAnchor">
<a href="#data-credit-card-default-data" class="anchor"></a>Data: Credit Card Default Data</h2>
<p><code>Default</code> of <code>ISLR package</code> is a simulated data set containing information on ten thousand customers. The aim here is to predict which customers will default on their credit card debt.</p>
<p>A data frame with 10000 observations on the following 4 variables.:</p>
<ul>
<li>
<code>default</code> : factor. A factor with levels No and Yes indicating whether the customer defaulted on their debt</li>
<li>
<code>student</code>: factor. A factor with levels No and Yes indicating whether the customer is a student</li>
<li>
<code>balance</code>: numeric. The average balance that the customer has remaining on their credit card after making their monthly payment</li>
<li>
<code>income</code> : numeric. Income of customer</li>
</ul>
<div class="sourceCode" id="cb1"><html><body><pre class="r"># Credit Card Default Data
head(ISLR::Default)
  default student   balance    income
1      No      No  729.5265 44361.625
2      No     Yes  817.1804 12106.135
3      No      No 1073.5492 31767.139
4      No      No  529.2506 35704.494
5      No      No  785.6559 38463.496
6      No     Yes  919.5885  7491.559

# structure of dataset
str(ISLR::Default)
'data.frame':   10000 obs. of  4 variables:
 $ default: Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
 $ student: Factor w/ 2 levels "No","Yes": 1 2 1 1 1 2 1 2 1 1 ...
 $ balance: num  730 817 1074 529 786 ...
 $ income : num  44362 12106 31767 35704 38463 ...

# summary of dataset
summary(ISLR::Default)
 default    student       balance           income     
 No :9667   No :7056   Min.   :   0.0   Min.   :  772  
 Yes: 333   Yes:2944   1st Qu.: 481.7   1st Qu.:21340  
                       Median : 823.6   Median :34553  
                       Mean   : 835.4   Mean   :33517  
                       3rd Qu.:1166.3   3rd Qu.:43808  
                       Max.   :2654.3   Max.   :73554  </pre></body></html></div>
</div>
<div id="split-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#split-dataset" class="anchor"></a>Split dataset</h2>
<p><code><a href="../reference/split_by.data.frame.html">split_by()</a></code> splits the data.frame or tbl_df into a training set and a test set.</p>
<div id="split-dataset-with-split_by" class="section level3">
<h3 class="hasAnchor">
<a href="#split-dataset-with-split_by" class="anchor"></a>Split dataset with <code>split_by()</code>
</h3>
<p>The <code>split_df</code> class is created, which contains the split information and criteria to separate the training and the test set.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">library(alookr)
library(dplyr)

# Generate data for the example
sb &lt;- ISLR::Default %&gt;%
  split_by(default, seed = 6534)

sb
# A tibble: 10,000 x 5
# Groups:   split_flag [2]
  default student balance income split_flag
  &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 No      No         730. 44362. train     
2 No      Yes        817. 12106. train     
3 No      No        1074. 31767. train     
4 No      No         529. 35704. train     
5 No      No         786. 38463. test      
6 No      Yes        920.  7492. train     
# … with 9,994 more rows</pre></body></html></div>
<p>The attributes of the <code>split_df</code> class are as follows.:</p>
<ul>
<li>split_seed : integer. random seed used for splitting</li>
<li>target : character. the name of the target variable</li>
<li>binary : logical. whether the target variable is binary class</li>
<li>minority : character. the name of the minority class</li>
<li>majority : character. the name of the majority class</li>
<li>minority_rate : numeric. the rate of the minority class</li>
<li>majority_rate : numeric. the rate of the majority class</li>
</ul>
<div class="sourceCode" id="cb3"><html><body><pre class="r">attr_names &lt;- names(attributes(sb))
attr_names
 [1] "names"         "row.names"     "groups"        "class"        
 [5] "split_seed"    "target"        "binary"        "minority"     
 [9] "majority"      "minority_rate" "majority_rate"

sb_attr &lt;- attributes(sb)

# The third property, row.names, is excluded from the output because its length is very long.
sb_attr[!attr_names %in% "row.names"]
$names
[1] "default"    "student"    "balance"    "income"     "split_flag"

$groups
# A tibble: 2 x 2
  split_flag       .rows
* &lt;chr&gt;      &lt;list&lt;int&gt;&gt;
1 test           [3,000]
2 train          [7,000]

$class
[1] "split_df"   "grouped_df" "tbl_df"     "tbl"        "data.frame"

$split_seed
[1] 6534

$target
  default 
"default" 

$binary
[1] TRUE

$minority
[1] "Yes"

$majority
[1] "No"

$minority_rate
   Yes 
0.0333 

$majority_rate
    No 
0.9667 </pre></body></html></div>
<p><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> summarizes the information of two datasets splitted by <code><a href="../reference/split_by.data.frame.html">split_by()</a></code>.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">summary(sb)
** Split train/test set information **
 + random seed        :  6534 
 + split data            
    - train set count :  7000 
    - test set count  :  3000 
 + target variable    :  default 
    - minority class  :  Yes (0.033300)
    - majority class  :  No (0.966700)</pre></body></html></div>
</div>
</div>
<div id="compare-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#compare-dataset" class="anchor"></a>Compare dataset</h2>
<p>Train data and test data should be similar. If the two datasets are not similar, the performance of the predictive model may be reduced.</p>
<p><code>alookr</code> provides a function to compare the similarity between train dataset and test dataset.</p>
<p>If the two data sets are not similar, the train dataset and test dataset should be splitted again from the original data.</p>
<div id="comparison-of-categorical-variables-with-compare_target_category" class="section level3">
<h3 class="hasAnchor">
<a href="#comparison-of-categorical-variables-with-compare_target_category" class="anchor"></a>Comparison of categorical variables with <code>compare_target_category()</code>
</h3>
<p>Compare the statistics of the categorical variables of the train set and test set included in the “split_df” class.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r">sb %&gt;%
  compare_target_category()
# A tibble: 4 x 5
  variable level train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 default  No    96.7  96.7   0.00476
2 default  Yes    3.33  3.33  0.00476
3 student  No    70.0  71.8   1.77   
4 student  Yes   30.0  28.2   1.77   

# compare variables that are character data types.
sb %&gt;%
  compare_target_category(add_character = TRUE)
# A tibble: 4 x 5
  variable level train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 default  No    96.7  96.7   0.00476
2 default  Yes    3.33  3.33  0.00476
3 student  No    70.0  71.8   1.77   
4 student  Yes   30.0  28.2   1.77   

# display marginal
sb %&gt;%
  compare_target_category(margin = TRUE)
# A tibble: 6 x 5
  variable level    train   test abs_diff
  &lt;chr&gt;    &lt;fct&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
1 default  No       96.7   96.7   0.00476
2 default  Yes       3.33   3.33  0.00476
3 default  &lt;Total&gt; 100    100     0.00952
4 student  No       70.0   71.8   1.77   
5 student  Yes      30.0   28.2   1.77   
6 student  &lt;Total&gt; 100    100     3.54   

# student variable only
sb %&gt;%
  compare_target_category(student)
# A tibble: 2 x 5
  variable level train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 student  No     70.0  71.8     1.77
2 student  Yes    30.0  28.2     1.77

sb %&gt;%
  compare_target_category(student, margin = TRUE)
# A tibble: 3 x 5
  variable level   train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 student  No       70.0  71.8     1.77
2 student  Yes      30.0  28.2     1.77
3 student  &lt;Total&gt; 100   100       3.54</pre></body></html></div>
<p>compare_target_category() returns tbl_df, where the variables have the following.:</p>
<ul>
<li>variable : character. categorical variable name</li>
<li>level : factor. level of categorical variables</li>
<li>train : numeric. the relative frequency of the level in the train set</li>
<li>test : numeric. the relative frequency of the level in the test set</li>
<li>abs_diff : numeric. the absolute value of the difference between two relative frequencies</li>
</ul>
</div>
<div id="comparison-of-numeric-variables-with-compare_target_numeric" class="section level3">
<h3 class="hasAnchor">
<a href="#comparison-of-numeric-variables-with-compare_target_numeric" class="anchor"></a>Comparison of numeric variables with <code>compare_target_numeric()</code>
</h3>
<p>Compare the statistics of the numerical variables of the train set and test set included in the “split_df” class.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r">sb %&gt;%
  compare_target_numeric()
# A tibble: 2 x 7
  variable train_mean test_mean train_sd test_sd train_z test_z
  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 balance        836.      834.     487.    477.    1.72   1.75
2 income       33446.    33684.   13437.  13101.    2.49   2.57

# balance variable only
sb %&gt;%
  compare_target_numeric(balance)
# A tibble: 1 x 7
  variable train_mean test_mean train_sd test_sd train_z test_z
  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 balance        836.      834.     487.    477.    1.72   1.75</pre></body></html></div>
<p>compare_target_numeric() returns tbl_df, where the variables have the following.:</p>
<ul>
<li>variable : character. numeric variable name</li>
<li>train_mean : numeric. arithmetic mean of train set</li>
<li>test_mean : numeric. arithmetic mean of test set</li>
<li>train_sd : numeric. standard deviation of train set</li>
<li>test_sd : numeric. standard deviation of test set</li>
<li>train_z : numeric. the arithmetic mean of the train set divided by the standard deviation</li>
<li>test_z : numeric. the arithmetic mean of the test set divided by the standard deviation</li>
</ul>
</div>
<div id="comparison-plot-with-compare_plot" class="section level3">
<h3 class="hasAnchor">
<a href="#comparison-plot-with-compare_plot" class="anchor"></a>Comparison plot with <code>compare_plot()</code>
</h3>
<p>Plot compare information of the train set and test set included in the “split_df” class.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co"># income variable only</span>
<span class="no">sb</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/compare_plot.html">compare_plot</a></span>(<span class="st">"income"</span>)</pre></body></html></div>
<p><img src="split_files/figure-html/compare_plot-1.png" width="576"></p>
<div class="sourceCode" id="cb8"><html><body><pre class="r">
<span class="co"># all varibales</span>
<span class="no">sb</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/compare_plot.html">compare_plot</a></span>()</pre></body></html></div>
<p><img src="split_files/figure-html/compare_plot-2.png" width="576"><img src="split_files/figure-html/compare_plot-3.png" width="576"><img src="split_files/figure-html/compare_plot-4.png" width="576"><img src="split_files/figure-html/compare_plot-5.png" width="576"></p>
</div>
<div id="diagnosis-of-train-set-and-test-set-with-compare_diag" class="section level3">
<h3 class="hasAnchor">
<a href="#diagnosis-of-train-set-and-test-set-with-compare_diag" class="anchor"></a>Diagnosis of train set and test set with <code>compare_diag()</code>
</h3>
<p>Diagnosis of similarity between datasets splitted by train set and set included in the “split_df” class.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">defaults &lt;- ISLR::Default
defaults$id &lt;- seq(NROW(defaults))

set.seed(1)
defaults[sample(seq(NROW(defaults)), 3), "student"] &lt;- NA
set.seed(2)
defaults[sample(seq(NROW(defaults)), 10), "balance"] &lt;- NA

sb_2 &lt;- defaults %&gt;%
  split_by(default)

sb_2 %&gt;%
  compare_diag()
* Detected diagnose missing value
 - student
 - balance
 - balance

* Detected diagnose missing levels
 - student
$missing_value
# A tibble: 3 x 4
  variables train_misscount train_missrate test_missrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1 student                 3         0.0429       NA     
2 balance                 8         0.114        NA     
3 balance                 2        NA             0.0667

$single_value
# A tibble: 0 x 3
# … with 3 variables: variables &lt;chr&gt;, train_uniq &lt;lgl&gt;, test_uniq &lt;lgl&gt;

$uniq_rate
# A tibble: 0 x 5
# … with 5 variables: variables &lt;chr&gt;, train_uniqcount &lt;int&gt;,
#   train_uniqrate &lt;dbl&gt;, test_uniqcount &lt;int&gt;, test_uniqrate &lt;dbl&gt;

$missing_level
# A tibble: 1 x 4
  variables n_levels train_missing_nlevel test_missing_nlevel
  &lt;chr&gt;        &lt;int&gt;                &lt;int&gt;               &lt;int&gt;
1 student          3                    0                   1

sb_2 %&gt;%
  compare_diag(add_character = TRUE)
* Detected diagnose missing value
 - student
 - balance
 - balance

* Detected diagnose missing levels
 - student
$missing_value
# A tibble: 3 x 4
  variables train_misscount train_missrate test_missrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1 student                 3         0.0429       NA     
2 balance                 8         0.114        NA     
3 balance                 2        NA             0.0667

$single_value
# A tibble: 0 x 3
# … with 3 variables: variables &lt;chr&gt;, train_uniq &lt;lgl&gt;, test_uniq &lt;lgl&gt;

$uniq_rate
# A tibble: 0 x 5
# … with 5 variables: variables &lt;chr&gt;, train_uniqcount &lt;int&gt;,
#   train_uniqrate &lt;dbl&gt;, test_uniqcount &lt;int&gt;, test_uniqrate &lt;dbl&gt;

$missing_level
# A tibble: 1 x 4
  variables n_levels train_missing_nlevel test_missing_nlevel
  &lt;chr&gt;        &lt;int&gt;                &lt;int&gt;               &lt;int&gt;
1 student          3                    0                   1

sb_2 %&gt;%
  compare_diag(uniq_thres = 0.0005)
* Detected diagnose missing value
 - student
 - balance
 - balance

* Detected diagnose many unique value
 - default
 - student

* Detected diagnose missing levels
 - student
$missing_value
# A tibble: 3 x 4
  variables train_misscount train_missrate test_missrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1 student                 3         0.0429       NA     
2 balance                 8         0.114        NA     
3 balance                 2        NA             0.0667

$single_value
# A tibble: 0 x 3
# … with 3 variables: variables &lt;chr&gt;, train_uniq &lt;lgl&gt;, test_uniq &lt;lgl&gt;

$uniq_rate
# A tibble: 2 x 5
  variables train_uniqcount train_uniqrate test_uniqcount test_uniqrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;          &lt;int&gt;         &lt;dbl&gt;
1 default                NA             NA              2      0.000667
2 student                NA             NA              2      0.000667

$missing_level
# A tibble: 1 x 4
  variables n_levels train_missing_nlevel test_missing_nlevel
  &lt;chr&gt;        &lt;int&gt;                &lt;int&gt;               &lt;int&gt;
1 student          3                    0                   1</pre></body></html></div>
</div>
</div>
<div id="extract-traintest-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-traintest-dataset" class="anchor"></a>Extract train/test dataset</h2>
<p>If you compare the train set with the test set and find that the two datasets are similar, extract the data from the split_df object.</p>
<div id="extract-train-set-or-test-set-with-extract_set" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-train-set-or-test-set-with-extract_set" class="anchor"></a>Extract train set or test set with <code>extract_set()</code>
</h3>
<p>Extract train set or test set from split_df class object.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r">train &lt;- sb %&gt;%
  extract_set(set = "train")

test &lt;- sb %&gt;%
  extract_set(set = "test")

dim(train)
[1] 7000    4

dim(test)
[1] 3000    4</pre></body></html></div>
</div>
<div id="extract-the-data-to-fit-the-model-with-sampling_target" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-the-data-to-fit-the-model-with-sampling_target" class="anchor"></a>Extract the data to fit the model with <code>sampling_target()</code>
</h3>
<p>In a target class, the ratio of the majority class to the minority class is not similar and the ratio of the minority class is very small, which is called the <code>imbalanced class</code>.</p>
<p>If target variable is an imbalanced class, the characteristics of the majority class are actively reflected in the model. This model implies an error in predicting the minority class as the majority class. So we have to make the train dataset a balanced class.</p>
<p><code><a href="../reference/sampling_target.html">sampling_target()</a></code> performs sampling on the train set of split_df to resolve the imbalanced class.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"># under-sampling with random seed
under &lt;- sb %&gt;%
  sampling_target(seed = 1234L)

under %&gt;%
  count(default)
# A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No        233
2 Yes       233

# under-sampling with random seed, and minority class frequency is 40%
under40 &lt;- sb %&gt;%
  sampling_target(seed = 1234L, perc = 40)

under40 %&gt;%
  count(default)
# A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No        349
2 Yes       233

# over-sampling with random seed
over &lt;- sb %&gt;%
  sampling_target(method = "ubOver", seed = 1234L)

over %&gt;%
  count(default)
# A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No       6767
2 Yes      6767

# over-sampling with random seed, and k = 10
over10 &lt;- sb %&gt;%
  sampling_target(method = "ubOver", seed = 1234L, k = 10)

over10 %&gt;%
  count(default)
# A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No       6767
2 Yes      2330

# SMOTE with random seed
smote &lt;- sb %&gt;%
  sampling_target(method = "ubSMOTE", seed = 1234L)

smote %&gt;%
  count(default)
# A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No        932
2 Yes       699

# SMOTE with random seed, and perc.under = 250
smote250 &lt;- sb %&gt;%
  sampling_target(method = "ubSMOTE", seed = 1234L, perc.under = 250)

smote250 %&gt;%
  count(default)
# A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No       1165
2 Yes       699</pre></body></html></div>
<p>The argument that specifies the sampling method in sampling_target () is method. “ubUnder” is under-sampling, and “ubOver” is over-sampling, “ubSMOTE” is SMOTE(Synthetic Minority Over-sampling TEchnique).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Choonghyun Ryu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
